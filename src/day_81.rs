// https://leetcode.com/problems/greatest-common-divisor-of-strings/solutions/3024822/greatest-common-divisor-of-strings/
pub fn gcd_of_strings(str1: String, str2: String) -> String {
    fn gcd(x: usize, y: usize) -> usize {
        if y == 0 {
            return x;
        }
        gcd(y, x % y)
    }
    if !(format!("{}{}", str1, str2) == format!("{}{}", str2, str1)) {
        return "".to_string();
    }
    let gcd_len = gcd(str1.len(), str2.len());
    str1.chars().take(gcd_len).collect()
}

pub fn find_gcd(nums: Vec<i32>) -> i32 {
    fn gcd(x: i32, y: i32) -> i32 {
        if y == 0 {
            return x;
        }
        gcd(y, x % y)
    }

    let min = *nums.iter().min().unwrap();
    let max = *nums.iter().max().unwrap();
    gcd(max, min)
}

pub fn subarray_gcd(nums: Vec<i32>, k: i32) -> i32 {
    fn gcd(x: i32, y: i32) -> i32 {
        if y == 0 {
            x
        } else {
            gcd(y, x % y)
        }
    }
    let mut ans = 0;
    for i in 0..nums.len() {
        if nums[i] % k == 0 {
            for j in i..nums.len() {
                if k == nums[i..=j].iter().fold(0, |acc, v| gcd(acc, *v)) {
                    ans += 1;
                }
            }
        }
    }
    ans
}

#[cfg(test)]
mod test {
    use super::*;

    #[test]
    fn test186() {
        println!(
            "{}",
            gcd_of_strings("ABCABC".to_string(), "ABC".to_string())
        ); // ABC

        println!(
            "{}",
            gcd_of_strings("ABABAB".to_string(), "ABAB".to_string())
        ); // AB

        println!("{}", gcd_of_strings("LEET".to_string(), "CODE".to_string())); // ""
    }

    #[test]
    fn test187() {
        println!("{}", find_gcd(vec![2, 5, 6, 9, 10])); // 2
        println!("{}", find_gcd(vec![7, 5, 6, 8, 3])); // 1
        println!("{}", find_gcd(vec![3, 3])); // 3
    }

    #[test]
    fn test188() {
        println!("{}", subarray_gcd(vec![9, 3, 1, 2, 6, 3], 3)); // 4
        println!("{}", subarray_gcd(vec![4], 7)); // 0
        println!(
            "{}",
            subarray_gcd(
                vec![
                    867827847, 485059063, 344072574, 618955815, 267714304, 915219870, 146090015,
                    419709201, 377620596, 89512355, 754281287, 271366334, 882836749, 710520081,
                    78258956, 828590650, 811832610, 965485604, 121078450, 361186579, 183680571,
                    368178071, 608103274, 247314884, 920678394, 486971164, 904152858, 160692893,
                    901663980, 669221670, 834295673, 336908734, 222130958, 499584456, 978527217,
                    354173922, 272601094, 582465531, 494497678, 452892398, 54139384, 210779726,
                    734127096, 596596638, 736389182, 456059644, 265801844, 292640612, 116581554,
                    407641286, 618562721, 670551162, 9698917, 508498957, 222332111, 676340802,
                    555232887, 991723023, 977407050, 985210567, 373946756, 872888426, 798422379,
                    267147712, 923282548, 353185596, 463794494, 182411496, 730116772, 641965800,
                    819847681, 354914763, 752354457, 201765329, 222491450, 897416548, 531759711,
                    376742994, 329873128, 123986615, 686655379, 804650647, 559585657, 63387860,
                    819894877, 446523938, 803961406, 264373309, 925878899, 739723592, 774270917,
                    57184561, 865859560, 4003981, 248038282, 576329954, 290812054, 709896686,
                    818052616, 117688177, 892110921, 889016321, 861618549, 371144055, 474929064,
                    754426840, 513292609, 703473981, 687008569, 528780335, 408782698, 516303886,
                    494763096, 69481434, 133464916, 110826344, 389885030, 796158209, 941346684,
                    569106026, 506657, 969687259, 804438412, 706951678, 809145561, 648701493,
                    792673293, 539945288, 426952753, 862938200, 286030701, 997458239, 287270263,
                    198513111, 188348587, 570575761, 542839936, 937503705, 712043335, 691495468,
                    940334005, 874799739, 229503889, 851581888, 473388491, 183792041, 750995694,
                    595602490, 988388465, 508943974, 947741887, 954600788, 676714701, 345235634,
                    783041787, 55291363, 73944389, 667289963, 39088099, 714497381, 429160318,
                    883572440, 914696379, 579250112, 54620733, 951000254, 739264860, 181349266,
                    404264436, 538685215, 244651661, 873734261, 625162623, 630475339, 993975599,
                    146294940, 920018449, 677355072, 375387654, 104289916, 108269329, 128389927,
                    124263543, 616258713, 521939306, 3111104, 438761708, 806248772, 459410448,
                    137874596, 117569163, 962811686, 97214284, 269630548, 323826307, 679009264,
                    401442454, 326287348, 603657208, 141089936, 388918301, 642858727, 600863825,
                    726782078, 109837157, 735438832, 610713342, 540384835, 924601017, 791819290,
                    32168596, 913224974, 118358534, 177374316, 246474300, 903326083, 897156841,
                    672674820, 521049820, 62127917, 228663887, 119003167, 372294608, 118582229,
                    951366396, 76381372, 166217178, 332945719, 119485563, 353101617, 799952633,
                    72259247, 605543482, 258503968, 539261844, 793752121, 144478218, 804450381,
                    446184071, 997285650, 778762529, 38932636, 851285730, 579742214, 914200587,
                    68218520, 541642039, 435381445, 405073643, 231095370, 278676577, 50611158,
                    119581251, 349197304, 672015323, 505914078, 918112222, 123142972, 554960230,
                    5396485, 197039916, 932211612, 643433173, 6350182, 493339104, 973816332,
                    810128316, 174588903, 367861230, 759283327, 256444180, 422561395, 460034384,
                    392297648, 519563716, 276616607, 491080014, 115504401, 792954307, 969493012,
                    55106281, 119284530, 321738973, 274203500, 71994422, 493107538, 725861288,
                    656709156, 769195699, 34686441, 251900237, 723721813, 236886622, 623966520,
                    273585140, 823136164, 269448698, 557249529, 322603064, 333910281, 564895554,
                    982648429, 302576353, 304649337, 661003412, 52213521, 409251772, 739240850,
                    203206793, 572920406, 303820033, 170884648, 282052709, 980592918, 185162894,
                    307164383, 384341758, 617316715, 469636737, 405890142, 896241701, 162913724,
                    203470240, 810616778, 602365019, 539207004, 283798684, 215278354, 663996872,
                    177973432, 563416013, 190176942, 690043287, 958616151, 248161188, 957444193,
                    468523149, 763690265, 898072760, 12889627, 720108080, 951513731, 7189944,
                    573551876, 28379544, 473347815, 991083863, 40631732, 61824210, 172106792,
                    368709896, 752922528, 966199325, 816486470, 956953029, 520869730, 448253276,
                    433066100, 463611758, 7197573, 925049145, 49380463, 37150572, 489148122,
                    115939546, 866355309, 272274157, 261736175, 574508587, 419572456, 173741611,
                    437377992, 796440639, 548662226, 541844275, 738598872, 93662474, 965061776,
                    164500363, 515764331, 787560177, 811964629, 463381861, 611251830, 406605242,
                    749735734, 521826990, 328517299, 966525321, 332215883, 564229736, 837067547,
                    988406174, 406154198, 737261071, 557607283, 364560492, 534424769, 881000569,
                    19049487, 797246821, 292389035, 549934545, 739887063, 170020909, 852124257,
                    856809127, 909420873, 417834634, 536613195, 976254892, 945022746, 982697665,
                    426424788, 837913139, 20463473, 695757165, 206115463, 156154696, 534843086,
                    137214530, 200381923, 50872107, 458733783, 780341431, 19346355, 220911796,
                    873084194, 272673989, 606959039, 348966640, 555363200, 401877710, 201324811,
                    726187927, 636991434, 109403926, 165617024, 629659393, 597093145, 318535281,
                    717304674, 287430386, 708395176, 913047898, 960475818, 189212488, 526948756,
                    547970286, 781187237, 971420439, 159974714, 754999604, 56741921, 472339419,
                    820436989, 873116130, 654357242, 3867675, 293662463, 550902402, 222625781,
                    420833441, 677164094, 682751244, 92249895, 29617291, 628953381, 83725125,
                    944253407, 600421197, 302965401, 617107803, 205950427, 560539470, 168030657,
                    984373381, 54050386, 838153703, 608187208, 758848053, 101865309, 898484426,
                    94222325, 447065714, 560002302, 744292618, 843137664, 459754100, 952620447,
                    331454293, 958896886, 613255037, 948954183, 627187622, 911008732, 431421321,
                    225697766, 447862780, 774988912, 784991806, 115272720, 288206661, 447115442,
                    620553204, 231773211, 60730713, 454600245, 112942072, 357256219, 23743940,
                    172016001, 237429190, 930847609, 219226150, 797671875, 337723439, 616604748,
                    185209810, 764553106, 532859457, 119131252, 446006229, 977175216, 302531424,
                    953705540, 792218431, 455834237, 549614370, 413554161, 327335958, 608168436,
                    85956310, 170216069, 793718108, 554346425, 106370391, 271317867, 19049937,
                    811268268, 711246794, 207226375, 741624996, 572938186, 591975704, 597448733,
                    621295962, 40819319, 411004148, 982265697, 353702336, 870479026, 127564438,
                    219532338, 813380177, 322163023, 168885559, 249536802, 989502393, 616290772,
                    62912895, 316153219, 412974768, 491792325, 741548756, 793305584, 895814844,
                    639651201, 85362661, 756360605, 652057993, 381913067, 746684088, 278083246,
                    162434367, 646024990, 506472818, 446726857, 962838923, 673509011, 537058987,
                    849683036, 194928722, 751936081, 794450722, 742943359, 98749578, 800076551,
                    190421756, 38424576, 347181153, 565153031, 941509529, 47305505, 624362601,
                    696014848, 769716099, 958502158, 959730934, 450623479, 474799184, 606633468,
                    828624163, 188386280, 949604482, 696041764, 161278032, 181947895, 579905958,
                    438010383, 883233429, 92331374, 201308084, 459336208, 629979244, 48912396,
                    758016866, 45574741, 535503643, 460936005, 231823492, 58663084, 677234343,
                    988877951, 464262301, 796960207, 82228435, 409158805, 313017, 40403040,
                    718694539, 864524764, 638974791, 341298806, 904687304, 24194282, 18245568,
                    818573517, 395623598, 757418887, 75642196, 66627662, 635862352, 930252251,
                    271475567, 915204040, 869796830, 35405692, 219736773, 422351636, 378243986,
                    807270439, 379700696, 382735051, 278352270, 997652240, 819137056, 673883639,
                    992242398, 333320014, 260463482, 8336308, 288780502, 933796681, 398104423,
                    50171952, 917377723, 484539148, 648076881, 446006651, 667599701, 372610755,
                    283324841, 69684138, 821752557, 576431951, 530422534, 319307427, 369532145,
                    959200910, 431813775, 805628111, 493959418, 415408411, 828360385, 884653421,
                    993975175, 420551431, 386578278, 420508262, 575026420, 909148551, 262065456,
                    832590330, 550659906, 9645748, 51972683, 67745079, 297917946, 658777756,
                    813324068, 742236002, 800113801, 601962172, 515143082, 545424553, 29103558,
                    779924392, 993164103, 543481370, 220502444, 504023711, 694219832, 754321474,
                    912542744, 523131170, 668911228, 808658742, 262561598, 76829795, 827265440,
                    319295837, 53354018, 957338410, 411787115, 473460862, 485532094, 887950771,
                    98622882, 966090958, 527617159, 152932306, 382158894, 530898329, 175777812,
                    338477702, 922874869, 794340161, 759456322, 976216275, 946159428, 721271221,
                    5095791, 732485056, 22591316, 944237607, 991211582, 64436509, 640983469,
                    955704611, 7941296, 95211733, 766467280, 15426591, 140651816, 382915452,
                    559840625, 373829180, 291555700, 877788780, 281528284, 904889651, 914782019,
                    716079777, 602631268, 880189544, 147089169, 386755409, 56881883, 118210344,
                    290722399, 563051061, 353413346, 533295123, 616100098, 652675289, 637100266,
                    882774952, 526697776, 60316984, 92387574, 600391865, 737144205, 823785035,
                    878520420, 183842854, 612933090, 595088700, 811128060, 577271256, 910745024,
                    552349380, 575519368, 642679387, 243858211, 975357208, 60772189, 326357652,
                    483625047, 916800826, 335440927, 448004599, 70225622, 890489859, 393948963,
                    325647572, 506019871, 423808213, 787215817, 794838583, 254771210, 468734441,
                    315027509, 712491399, 544361442, 183921281, 599412024, 451115484, 220213902,
                    148977423, 78709219, 3739695, 717183943, 38566625, 762172327, 242967177,
                    508230206, 213489085, 929969683, 167978065, 958577643, 943079565, 496796592,
                    686648887, 73347049, 714284138, 811201701, 429671171, 19244, 490843708,
                    263287354, 292265241, 318136402, 900896388, 965125127, 76600751, 261935835,
                    561735270, 363546728, 28118178, 157019586, 437336151, 498176837, 247636501,
                    88807083, 942649306, 463476910, 906271970, 975334522, 212991719, 213618031,
                    67888986, 960937182, 982169878, 707474970, 25292381, 402903730, 411496001,
                    445043930, 417457644, 99219371, 30401894, 977924191, 210247200, 208899915,
                    437440426, 147776448, 506601702, 251806910, 740882505, 510370110, 184269193,
                    859356384, 118238505, 621694604, 669594923, 228266124, 862939407, 833036652,
                    233537892, 425163262, 104169665, 176418031, 142733589, 326378764, 67831588,
                    546908023, 565889990, 561940984, 243979969, 996349382, 828521749, 410241546,
                    874965866, 336134356, 98474793, 521036252, 49647180, 356798292, 223575205,
                    8449702, 141136822, 240753588, 414779472, 837324947, 966905699, 425057167,
                    314908822, 159105565, 331086975, 895526700, 313217389, 346252737, 500328418,
                    842039180, 752124971, 868271299, 86544873, 530666015, 956573085, 684461760,
                    242386449, 466441856, 735631255, 639723958, 148817075, 326626527, 493543089,
                    175481153, 910458831, 709900639, 532788910, 394899094, 617292814, 252337620,
                    401062403, 238031946, 118267814, 604776598, 815310474, 930551259, 831952031,
                    830463267, 401756160, 313833650, 855927696, 929403838, 638127975, 124393583,
                    11808858, 569063179, 698580846, 682627304, 121866844, 990135497, 906076842,
                    39358763, 372849825, 453106889, 955508451, 361944503, 52656438, 313669298,
                    799534160, 731155029, 487229269, 822260408, 684046912, 127521726, 156581005,
                    358689768, 405526497, 662237414, 826648753, 179408489, 349490925, 18856465,
                    931152529, 280017624, 218915281, 391672090, 703274142, 139893943, 163496149,
                    825139541, 621823851, 434575657, 771155322, 109556171, 198263938
                ],
                51844853
            )
        ); // 0
    }
}
